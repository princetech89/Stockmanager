{% extends "base.html" %}

{% block title %}Reports - Stock Inventory Management{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">Reports & Analytics</h1>
    <div class="page-actions">
        <button class="btn btn-primary" onclick="generateReport()">
            <i class="fas fa-chart-bar"></i>
            Generate Report
        </button>
    </div>
</div>

<!-- Report Filters -->
<div class="reports-filters">
    <div class="filter-card">
        <div class="card-header">
            <h3>Report Filters</h3>
        </div>
        <div class="card-body">
            <div class="form-row">
                <div class="form-group">
                    <label for="reportType">Report Type</label>
                    <select class="form-control" id="reportType" onchange="updateReportFields()">
                        <option value="sales">Sales Report</option>
                        <option value="inventory">Inventory Report</option>
                        <option value="gst">GST Report</option>
                        <option value="profit">Profit & Loss</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="reportPeriod">Period</label>
                    <select class="form-control" id="reportPeriod" onchange="updateDateRange()">
                        <option value="today">Today</option>
                        <option value="week">This Week</option>
                        <option value="month">This Month</option>
                        <option value="quarter">This Quarter</option>
                        <option value="year">This Year</option>
                        <option value="custom">Custom Range</option>
                    </select>
                </div>
            </div>
            <div class="form-row" id="customDateRange" style="display: none;">
                <div class="form-group">
                    <label for="startDate">Start Date</label>
                    <input type="date" class="form-control" id="startDate">
                </div>
                <div class="form-group">
                    <label for="endDate">End Date</label>
                    <input type="date" class="form-control" id="endDate">
                </div>
            </div>
            <div class="form-actions">
                <button class="btn btn-primary" onclick="loadReportData()">
                    <i class="fas fa-search"></i>
                    Load Data
                </button>
                <button class="btn btn-outline" onclick="exportReport()">
                    <i class="fas fa-download"></i>
                    Export
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Report Charts -->
<div class="reports-charts">
    <div class="chart-card">
        <div class="chart-header">
            <h3 id="chartTitle">Sales Overview</h3>
            <div class="chart-actions">
                <select id="chartType" onchange="updateChartType()">
                    <option value="bar">Bar Chart</option>
                    <option value="line">Line Chart</option>
                    <option value="pie">Pie Chart</option>
                    <option value="doughnut">Doughnut Chart</option>
                </select>
            </div>
        </div>
        <div class="chart-container">
            <canvas id="reportChart"></canvas>
        </div>
    </div>
</div>

<!-- Report Summary -->
<div class="report-summary">
    <div class="summary-card">
        <div class="card-header">
            <h3>Report Summary</h3>
        </div>
        <div class="card-body">
            <div class="summary-grid" id="reportSummary">
                <!-- Summary items will be loaded here -->
            </div>
        </div>
    </div>
</div>

<!-- Report Data Table -->
<div class="report-data">
    <div class="data-card">
        <div class="card-header">
            <h3>Detailed Data</h3>
            <div class="card-actions">
                <button class="btn btn-sm btn-outline" onclick="exportTableData()">
                    <i class="fas fa-file-excel"></i>
                    Export Excel
                </button>
                <button class="btn btn-sm btn-outline" onclick="exportTablePDF()">
                    <i class="fas fa-file-pdf"></i>
                    Export PDF
                </button>
            </div>
        </div>
        <div class="card-body">
            <div class="table-container">
                <table class="data-table" id="reportDataTable">
                    <thead id="reportTableHead">
                        <!-- Table headers will be loaded based on report type -->
                    </thead>
                    <tbody id="reportTableBody">
                        <!-- Table data will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- GST Summary (for GST reports) -->
<div class="gst-summary" id="gstSummary" style="display: none;">
    <div class="summary-card">
        <div class="card-header">
            <h3>GST Summary</h3>
        </div>
        <div class="card-body">
            <div class="gst-grid">
                <div class="gst-item">
                    <label>CGST (9%):</label>
                    <span id="cgst9">₹0.00</span>
                </div>
                <div class="gst-item">
                    <label>SGST (9%):</label>
                    <span id="sgst9">₹0.00</span>
                </div>
                <div class="gst-item">
                    <label>IGST (18%):</label>
                    <span id="igst18">₹0.00</span>
                </div>
                <div class="gst-item">
                    <label>Total GST:</label>
                    <span id="totalGST">₹0.00</span>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/reports.js') }}"></script>
{% endblock %}
